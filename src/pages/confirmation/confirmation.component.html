<div class="flex justify-center items-center min-h-[80vh] py-8">
  @if (order(); as o) {
    <div class="bg-white rounded-lg shadow-xl p-8 max-w-2xl w-full mx-4">
      <div class="text-center mb-8">
        <div class="w-16 h-16 mx-auto rounded-full bg-green-100 flex items-center justify-center mb-4">
          <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <h1 class="text-2xl font-bold text-gray-800">تم إرسال الطلب بنجاح</h1>
        <p class="text-gray-600 mt-2">
          شكراً على ثقتكم. سنتقوم بالتواصل معكم قريباً إن شاء الله؛ لتأكيد الطلب والتحقق من عنوان التوصيل.
        </p>
      </div>

      <div class="bg-yellow-100 border-r-4 border-yellow-500 text-yellow-800 p-4 rounded-md mb-6" role="alert">
        <p class="font-bold">معرف الطلب: {{ o.id }}</p>
      </div>

      <!-- Delivery Details -->
      <div class="bg-gray-50 rounded-lg p-4 mb-6">
        <h2 class="font-bold mb-2">عنوان التوصيل:</h2>
        <div class="grid grid-cols-3 gap-4 text-sm">
          <div><strong>الاسم:</strong> {{ o.customer.name }}</div>
          <div><strong>الهاتف:</strong> {{ o.customer.phone }}</div>
          <div><strong>العنوان:</strong> {{ o.customer.address }}</div>
        </div>
      </div>

      <!-- Items -->
      <div class="mb-6">
        <h2 class="font-bold mb-2">الكتب المطلوبة:</h2>
        <div class="space-y-2">
          @for (item of o.items; track item.book.id) {
            <div class="flex justify-between items-center bg-gray-50 p-2 rounded-md">
              <div class="flex items-center gap-3">
                <img [src]="item.book.coverImage" class="w-12 h-16 object-cover rounded">
                <div>
                  <p class="font-semibold">{{ item.book.title }}</p>
                  <p class="text-sm text-gray-500">الكمية: {{ item.quantity }}</p>
                </div>
              </div>
              <p class="font-semibold">{{ item.book.currentPrice * item.quantity }} أوقية</p>
            </div>
          }
        </div>
      </div>
      
      <!-- Totals -->
      <div class="bg-green-50 rounded-lg p-4">
        <div class="flex justify-between items-center text-lg font-bold text-green-800">
          <span>المجموع النهائي:</span>
          <span>{{ o.total }} أوقية جديدة</span>
        </div>
      </div>

      <div class="text-center mt-8">
        <a [href]="whatsappLink" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-colors">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.6 14c-.6-2.6-2.5-4.5-5.1-5.1-2.6-.6-5.3.2-7.2 2.1-.2.2-.2.5 0 .7l1.3 1.3c.2.2.5.2.7 0l.2-.2c1.3-1.3 3.3-1.3 4.5 0l.2.2c.2.2.5.2.7 0l1.3-1.3c.2-.2.2-.5 0-.7-1.9-1.9-4.6-2.7-7.2-2.1-2.6.6-4.5 2.5-5.1 5.1-.6 2.6.2 5.3 2.1 7.2.2.2.2.5 0 .7l-1.3 1.3c-.2.2-.2.5 0 .7 1.9 1.9 4.6 2.7 7.2 2.1 2.6-.6 4.5-2.5 5.1-5.1.6-2.6-.2-5.3-2.1-7.2zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z"/></svg>
          <span>تواصل معنا</span>
        </a>
      </div>
    </div>
  } @else {
     <div class="text-center bg-white rounded-lg shadow-lg p-12">
      <h2 class="text-2xl font-bold text-gray-800">لم يتم العثور على الطلب</h2>
      <p class="text-gray-500 mt-2 mb-6">لا يمكننا العثور على تفاصيل هذا الطلب. الرجاء العودة للصفحة الرئيسية.</p>
      <a routerLink="/" class="inline-block px-8 py-3 rounded-lg text-white font-semibold main-btn hover:opacity-90 transition-opacity">
        الصفحة الرئيسية
      </a>
    </div>
  }
</div>